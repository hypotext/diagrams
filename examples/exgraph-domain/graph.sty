variable {
    primary = rgba(1, 1, 0, 1)
    secondary = rgba(0,0.9,0.9,1)
}

forall Graph A
{
    A.icon = Circle {
        strokeWidth: 0.0
        color: rgba(0.0, 0.0, 0.0, 0.0)
    }

    A.text = Text{
        string: A.label
    }

    A.layerNumber = 0

    ensure minSize(A.icon)
    ensure maxSize(A.icon)
    ensure contains(A.icon, A.text)
    ensure contains(A.icon, A.text)

    A.text above A.icon
}

forall Graph A; Graph B; Graph Result 
where Result := or(A, B) 
{
    override Result.layerNumber = A.layerNumber + 1

    Result.icon2 = Circle {
        strokeWidth: 0.0
        center: Result.icon.center
        r: Result.icon.r - 1.0
        color: chooseColor(Result.layerNumber, variable.primary, variable.secondary)
    }

    override Result.text = Circle{
        strokeWidth: 0.0
        r : 0.0
    }

    ensure smallerThan(A.icon, Result.icon)
    ensure smallerThan(B.icon, Result.icon)
    ensure contains(Result.icon2, A.icon, 5.0)
    ensure contains(Result.icon2, B.icon, 5.0)
    ensure disjoint(A.icon, B.icon)

    A.icon above Result.icon2
    B.icon above Result.icon2
}

forall Graph A; Graph B; Graph Result 
where Result := if(A, B) 
{
    override Result.layerNumber = A.layerNumber + 1

    override Result.icon = Circle{
        strokeWidth: 0.0
        color: chooseColor(Result.layerNumber + 1, variable.primary, variable.secondary)
    }

    override Result.icon2 = Circle{
        strokeWidth: 0.0
        color: chooseColor(Result.layerNumber, variable.primary, variable.secondary)
    }

    override Result.text.string = ""

    override Result.icon2.r = Result.icon.r / 1.6

    ensure outsideOf(A.text, Result.icon2)
    ensure contains(Result.icon, A.text)
    ensure contains(Result.icon2, B.text)

    ensure maxSize(Result.icon)
    ensure minSize(Result.icon)
    ensure maxSize(Result.icon2)
    ensure minSize(Result.icon2)
    ensure contains(Result.icon, Result.icon2, 5.0)

    ensure contains(Result.icon2, B.icon, 5.0)


    Result.icon2 above Result.icon
}
